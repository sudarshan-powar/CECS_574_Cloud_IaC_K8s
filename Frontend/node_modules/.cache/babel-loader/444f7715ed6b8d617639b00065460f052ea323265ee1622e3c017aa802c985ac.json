{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"min-height\": \"60vh\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Navbar = _resolveComponent(\"Navbar\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_Footer = _resolveComponent(\"Footer\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [!['Signup', 'Signin'].includes(_ctx.$route.name) ? (_openBlock(), _createBlock(_component_Navbar, {\n    key: 0,\n    cartCount: $data.cartCount,\n    onResetCartCount: $options.resetCartCount\n  }, null, 8 /* PROPS */, [\"cartCount\", \"onResetCartCount\"])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_1, [$data.products && $data.categories ? (_openBlock(), _createBlock(_component_router_view, {\n    key: 0,\n    baseURL: $data.baseURL,\n    products: $data.products,\n    categories: $data.categories,\n    onFetchData: $options.fetchData\n  }, null, 8 /* PROPS */, [\"baseURL\", \"products\", \"categories\", \"onFetchData\"])) : _createCommentVNode(\"v-if\", true)]), !['Signup', 'Signin'].includes(_ctx.$route.name) ? (_openBlock(), _createBlock(_component_Footer, {\n    key: 1\n  })) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["style","includes","_ctx","$route","name","_createBlock","_component_Navbar","cartCount","$data","onResetCartCount","$options","resetCartCount","_createElementVNode","_hoisted_1","products","categories","_component_router_view","baseURL","onFetchData","fetchData","_component_Footer","key"],"sources":["/Users/sudarshanpowar/Desktop/Personal/project2/Ecomm-UI/ecommerce-vuejs/src/App.vue"],"sourcesContent":["<template>\r\n  <Navbar\r\n    :cartCount=\"cartCount\"\r\n    @resetCartCount=\"resetCartCount\"\r\n    v-if=\"!['Signup', 'Signin'].includes($route.name)\"\r\n  />\r\n  <div style=\"min-height: 60vh\">\r\n    <router-view\r\n      v-if=\"products && categories\"\r\n      :baseURL=\"baseURL\"\r\n      :products=\"products\"\r\n      :categories=\"categories\"\r\n      @fetchData=\"fetchData\"\r\n    >\r\n    </router-view>\r\n  </div>\r\n  <Footer v-if=\"!['Signup', 'Signin'].includes($route.name)\" />\r\n</template>\r\n\r\n<script>\r\nimport Navbar from './components/Navbar.vue';\r\nimport Footer from './components/Footer.vue';\r\nimport axios from 'axios'; \r\nexport default {\r\n  data() {\r\n    return {\r\n      //baseURL: 'https://limitless-lake-55070.herokuapp.com/',\r\n      baseURL: \"http://localhost:8080/api/\",\r\n      products: null,\r\n      categories: null,\r\n      key: 0,\r\n      token: null,\r\n      cartCount: 0,\r\n    };\r\n  },\r\n\r\n  components: { Footer, Navbar },\r\n  methods: {\r\n    async fetchData() {\r\n      // fetch products\r\n      await axios\r\n        .get(this.baseURL + 'product/')\r\n        .then((res) => (this.products = res.data))\r\n        .catch((err) => console.log(err));\r\n\r\n      //fetch categories\r\n      await axios\r\n        .get(this.baseURL + 'category/')\r\n        .then((res) => (this.categories = res.data))\r\n        .catch((err) => console.log(err));\r\n\r\n      //fetch cart items\r\n      if (this.token) {\r\n        await axios.get(`${this.baseURL}cart/?token=${this.token}`).then(\r\n          (response) => {\r\n            if (response.status == 200) {\r\n              // update cart\r\n              this.cartCount = Object.keys(response.data.cartItems).length;\r\n            }\r\n          },\r\n          (error) => {\r\n            console.log(error);\r\n          }\r\n        );\r\n      }\r\n    },\r\n    resetCartCount() {\r\n      this.cartCount = 0;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.token = localStorage.getItem('token');\r\n    this.fetchData();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\nhtml {\r\n  overflow-y: scroll;\r\n}\r\n</style>\r\n"],"mappings":";;EAMOA,KAAwB,EAAxB;IAAA;EAAA;AAAwB;;;;;mFAFCC,QAAQ,CAACC,IAAA,CAAAC,MAAM,CAACC,IAAI,K,cAHlDC,YAAA,CAIEC,iBAAA;;IAHCC,SAAS,EAAEC,KAAA,CAAAD,SAAS;IACpBE,gBAAc,EAAEC,QAAA,CAAAC;mGAGnBC,mBAAA,CASM,OATNC,UASM,GAPIL,KAAA,CAAAM,QAAQ,IAAIN,KAAA,CAAAO,UAAU,I,cAD9BV,YAAA,CAOcW,sBAAA;;IALXC,OAAO,EAAET,KAAA,CAAAS,OAAO;IAChBH,QAAQ,EAAEN,KAAA,CAAAM,QAAQ;IAClBC,UAAU,EAAEP,KAAA,CAAAO,UAAU;IACtBG,WAAS,EAAER,QAAA,CAAAS;8IAIoBlB,QAAQ,CAACC,IAAA,CAAAC,MAAM,CAACC,IAAI,K,cAAxDC,YAAA,CAA6De,iBAAA;IAAAC,GAAA;EAAA,M"},"metadata":{},"sourceType":"module","externalDependencies":[]}