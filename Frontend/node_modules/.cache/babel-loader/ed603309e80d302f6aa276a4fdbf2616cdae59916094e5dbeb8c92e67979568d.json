{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"div_class\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"You will be redirected to payment page\", -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"alert alert-primary\",\n  role: \"alert\"\n}, \" While making payment use card number 4242 4242 4242 4242 and enter random cvv(3 digit) \", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _hoisted_3, _createElementVNode(\"button\", {\n    class: \"checkout_button\",\n    id: \"proceed-to-checkout\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.goToCheckout())\n  }, \" Make payment \")]);\n}","map":{"version":3,"names":["class","_createElementVNode","role","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","id","onClick","_cache","$event","$options","goToCheckout"],"sources":["/Users/sudarshanpowar/Desktop/Personal/project2/Ecomm-UI/ecommerce-vuejs/src/views/Checkout/Checkout.vue"],"sourcesContent":["<template>\r\n  <div class=\"div_class\">\r\n    <h3>You will be redirected to payment page</h3>\r\n\r\n    <div class=\"alert alert-primary\" role=\"alert\">\r\n      While making payment use card number 4242 4242 4242 4242 and enter random\r\n      cvv(3 digit)\r\n    </div>\r\n\r\n    <button\r\n      class=\"checkout_button\"\r\n      id=\"proceed-to-checkout\"\r\n      @click=\"goToCheckout()\"\r\n    >\r\n      Make payment\r\n    </button>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'; \r\nexport default {\r\n  data() {\r\n    return {\r\n      stripeAPIToken: process.env.VUE_APP_STRIPETOKEN,\r\n      stripe: '', // Will hold the Stripe instance\r\n      token: null,\r\n      sessionId: null,\r\n      checkoutBodyArray: [],\r\n    };\r\n  },\r\n\r\n  name: 'Checkout',\r\n  props: ['baseURL'],\r\n  methods: {\r\n    getAllItems() {\r\n      axios.get(`${this.baseURL}cart/?token=${this.token}`).then(\r\n        (response) => {\r\n          if (response.status == 200) {\r\n            let products = response.data;\r\n            let len = Object.keys(products.cartItems).length;\r\n            for (let i = 0; i < len; i++)\r\n              this.checkoutBodyArray.push({\r\n                imageUrl: products.cartItems[i].product.imageURL,\r\n                productName: products.cartItems[i].product.name,\r\n                quantity: products.cartItems[i].quantity,\r\n                price: products.cartItems[i].product.price,\r\n                productId: products.cartItems[i].product.id,\r\n                userId: products.cartItems[i].userId,\r\n              });\r\n          }\r\n        },\r\n        (err) => {\r\n          console.log(err);\r\n        }\r\n      );\r\n    },\r\n\r\n    goToCheckout() {\r\n      console.log(\"here\");\r\n      axios\r\n        .post(\"http://localhost:8080/\" + 'api/order/create-checkout-session', this.checkoutBodyArray)\r\n        .then((response) => {\r\n          localStorage.setItem('sessionId', response.data.sessionId);\r\n          console.log(response.data);\r\n          return response.data;\r\n        })\r\n        .then((session) => {\r\n          return this.stripe.redirectToCheckout({ sessionId: session.sessionId });\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error during redirectToCheckout: \", error);\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.token = localStorage.getItem('token');\r\n    \r\n    this.getAllItems();\r\n\r\n    if (window.Stripe) {\r\n      this.stripe = window.Stripe(this.stripeAPIToken);\r\n      console.log(this.stripe);\r\n      console.log(this.stripeAPIToken);\r\n\r\n    } else {\r\n      console.error(\"Stripe library not loaded\");\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n.alert {\r\n  width: 50%;\r\n}\r\n\r\n.div_class {\r\n  margin-top: 5%;\r\n  margin-left: 30%;\r\n}\r\n\r\n.checkout_button {\r\n  background-color: #5d3dec;\r\n  border: none;\r\n  color: white;\r\n  margin-left: 15%;\r\n  padding: 15px 30px;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  display: inline-block;\r\n  font-size: 15px;\r\n  font-weight: bold;\r\n  border-radius: 15px;\r\n}\r\n\r\n.checkout_button:focus {\r\n  outline: none;\r\n  box-shadow: none;\r\n}\r\n\r\n.checkout_button:disabled {\r\n  background-color: #9b86f7;\r\n  border: none;\r\n  color: white;\r\n  margin-left: 15%;\r\n  padding: 15px 30px;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  display: inline-block;\r\n  font-size: 15px;\r\n  font-weight: bold;\r\n  border-radius: 15px;\r\n  cursor: not-allowed;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;gCACpBC,mBAAA,CAA+C,YAA3C,wCAAsC;gCAE1CA,mBAAA,CAGM;EAHDD,KAAK,EAAC,qBAAqB;EAACE,IAAI,EAAC;GAAQ,0FAG9C;;;uBANFC,mBAAA,CAeM,OAfNC,UAeM,GAdJC,UAA+C,EAE/CC,UAGM,EAENL,mBAAA,CAMS;IALPD,KAAK,EAAC,iBAAiB;IACvBO,EAAE,EAAC,qBAAqB;IACvBC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,YAAY;KACrB,gBAED,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}